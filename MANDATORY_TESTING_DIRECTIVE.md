# ุฃูุฑ ุชูุฌููู ุตุงุฑู ูุฅูุฒุงูู - ุชุบุทูุฉ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ููุดุงุฑูุน TypeScript
## โ๏ธ ุชุญุฐูุฑ: ูุฐุง ุฃูุฑ ุฅูุฒุงูู ูุบูุฑ ูุงุจู ููุชูุงูุถ

ูุฐุง ุงูุฃูุฑ ุงูุชูุฌููู ููุฑุถ ุชุบุทูุฉ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ุนูู ูู ููู ูุงุจู ููุงุฎุชุจุงุฑ ูู ูุดุฑูุน **Agent Team** ุจุฏูู ุฃู ุงุณุชุซูุงุกุงุช. ุฃู ุงูุชูุงู ููุฐู ุงูููุงุนุฏ ุณูุคุฏู ูุฑูุถ ุงูููุฏ ุชููุงุฆูุงู.

## ๐ ุงููุจุงุฏุฆ ุงูุฃุณุงุณูุฉ ุบูุฑ ุงููุงุจูุฉ ููุชูุงูุถ

### 1. ุงูุชุบุทูุฉ ุงูุดุงููุฉ ุงูุฅูุฒุงููุฉ
**ูุงุนุฏุฉ ุตุงุฑูุฉ:** ูู ููู TypeScript (`.ts`/`.tsx`) ูู ุงููุดุฑูุน ูุฌุจ ุฃู ูุญุชูู ุนูู ุงุฎุชุจุงุฑุงุช ุดุงููุฉ.
- โ **ูุง ุงุณุชุซูุงุกุงุช.** ูุง ุฃุนุฐุงุฑ. ูุง ูููุงุช ุจุฏูู ุงุฎุชุจุงุฑุงุช.

**ุงููููุงุช ุงููุณุชูุฏูุฉ ุฅูุฒุงููุงู:**
- โ ุฌููุน ุงููููุงุช ูู `packages/*/src/`
- โ ุฌููุน ุงููููุงุช ูู `apps/*/src/`
- โ ูู ุฏุงูุฉุ ููุงุณุ ูููุ ููููุ ุฎุฏูุฉุ ูุนุงูุฌ
- โ ูู ูุฑุน ููุทูู (if/else, switch, ternary)
- โ ูู ุญุงูุฉ ุฎุทุฃ ูุญุชููุฉ
- โ ูู ุญุงูุฉ ุญุฏูุฉ (edge case)

### 2. ุงูุญุฏูุฏ ุงูุฏููุง ุงูุฅูุฒุงููุฉ (ูุง ุชุณุงูุญ)

#### ุงูุญุฏูุฏ ุงูุนุงูุฉ (Global Minimums)
| ุงููููุงุณ | ุงูุญุฏ ุงูุฃุฏูู | ุงูุชุนููู |
|---------|-------------|---------|
| **Lines** | โฅ85% | ุชุบุทูุฉ ุงูุฃุณุทุฑ |
| **Functions** | โฅ90% | ุชุบุทูุฉ ุงูุฏูุงู |
| **Branches** | โฅ85% | ุชุบุทูุฉ ุงููุฑูุน |
| **Statements** | โฅ85% | ุชุบุทูุฉ ุงูุนุจุงุฑุงุช |

#### ุญุฏูุฏ ุฎุงุตุฉ ุญุณุจ ุงูุญุฒูุฉ (Package-Specific)
| ุงูุญุฒูุฉ | Lines | Functions | Branches | Statements |
|--------|-------|-----------|----------|------------|
| **@agent-team/ai** | โฅ95% | โฅ100% | โฅ95% | โฅ95% |
| **@agent-team/orchestration** | โฅ95% | โฅ100% | โฅ95% | โฅ95% |
| **@agent-team/communication** | โฅ90% | โฅ95% | โฅ90% | โฅ90% |
| **apps/server** | โฅ85% | โฅ90% | โฅ85% | โฅ85% |
| **ุงููุณุงุนุฏุงุช** | โฅ95% | โฅ95% | โฅ95% | โฅ95% |
| **ุงูููุงุฉ** | โฅ95% | โฅ100% | โฅ95% | โฅ95% |
| **ุงูุฎุฏูุงุช** | โฅ90% | โฅ95% | โฅ90% | โฅ90% |

## ๐๏ธ ุงูุฅุนุฏุงุฏ ุงูุฅูุฒุงูู

### 1. ููู Vitest Configuration ุงูุตุงุฑู
```typescript
// vitest.config.ts - ุฅุนุฏุงุฏ Vitest ุงูุตุงุฑู
export default defineConfig({
  test: {
    coverage: {
      provider: "v8",
      reporter: ["text", "json", "html", "lcov"],
      reportsDirectory: "./coverage",
      all: true,
      include: [
        "packages/*/src/**/*.{ts,tsx}",
        "apps/*/src/**/*.{ts,tsx}"
      ],
      exclude: [
        "**/node_modules/**",
        "**/dist/**",
        "**/build/**",
        "**/*.d.ts",
        "**/index.ts", // Only if simple export-only files
        "**/types.ts", // Only if pure interfaces/types
        "**/*.test.{ts,tsx}",
        "**/*.spec.{ts,tsx}",
        "**/__tests__/**",
        "**/__mocks__/**"
      ],
      // MANDATORY THRESHOLDS - NO EXCEPTIONS ALLOWED
      thresholds: {
        global: {
          branches: 85, functions: 90, lines: 85, statements: 85,
        },
        "packages/ai/src/**/*.{ts,tsx}": {
          branches: 95, functions: 100, lines: 95, statements: 95,
        },
        // ... ุจุงูู ุงูุญุฏูุฏ
      },
    },
  },
});
```

### 2. Package.json Scripts ุงูุฅูุฒุงููุฉ
```json
{
  "scripts": {
    "test": "vitest run --coverage",
    "test:ci": "vitest run --coverage --reporter=verbose --reporter=json",
    "test:coverage": "vitest run --coverage --reporter=verbose --reporter=json",
    "enforce:coverage": "tsx scripts/enforce-coverage.ts",
    "enforce:all-files-tested": "tsx scripts/find-untested-files.ts",
    "enforce:strict": "pnpm run test:coverage && pnpm run enforce:coverage && pnpm run enforce:all-files-tested",
    "pre-commit": "pnpm run typecheck && pnpm run lint && pnpm run enforce:strict",
    "pre-push": "pnpm run test:ci",
    "verify:all": "pnpm run typecheck && pnpm run lint && pnpm run test:ci && pnpm run enforce:coverage && pnpm run enforce:all-files-tested"
  }
}
```

## ๐ ุณูุฑูุจุชุงุช ุงูุฅููุงุฐ ุงูุฅูุฒุงููุฉ

### 1. ุณูุฑูุจุช ูุญุต ุงูุชุบุทูุฉ ุงูุตุงุฑู
```typescript
// scripts/enforce-coverage.ts
// ูุชุญูู ูู ุฃู ุฌููุน ุงูุญุฏูุฏ ูุณุชููุงุฉ - ูุดู ููุฑู ุนูุฏ ุนุฏู ุงูุงูุชุซุงู
```

### 2. ุณูุฑูุจุช ูุดู ุงููููุงุช ุจุฏูู ุงุฎุชุจุงุฑุงุช
```typescript
// scripts/find-untested-files.ts
// ููุดู ุฃู ููู TypeScript ุจุฏูู ููู ุงุฎุชุจุงุฑ ููุงุจู
```

### 3. ุณูุฑูุจุช ููุฎุต ุงูุชุบุทูุฉ
```typescript
// scripts/coverage-summary.ts
// ูููุฏ ุชูุฑูุฑ ููุตู ุนู ุญุงูุฉ ุงูุชุบุทูุฉ
```

## ๐ฆ ุขููุฉ ุงูุฅููุงุฐ ุงูุชููุงุฆู

### ุฃ. ูุญุต ุชููุงุฆู ูุจู ูู Commit
```bash
# .husky/pre-commit (ุฅูุฒุงูู - ูุฑูุถ ุงูููุฏ ุบูุฑ ุงููุทุงุจู)
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "๐ Enforcing mandatory test coverage..."

# ูุญุต ุงูุชุบุทูุฉ ุนูู ุงููููุงุช ุงููุชุบูุฑุฉ
pnpm run enforce:strict

# ุฅุฐุง ูุดูุช ุงูุชุบุทูุฉุ ููุฑูุถ ุงูู commit
if [ $? -ne 0 ]; then
  echo "โ COMMIT REJECTED: Coverage thresholds not met"
  exit 1
fi

echo "โ Coverage check passed - proceeding with commit"
```

### ุจ. ูุญุต ุตุงุฑู ูู CI/CD
```yaml
# .github/workflows/mandatory-tests.yml
name: ๐จ Mandatory Test Coverage Enforcement

on: [pull_request, push]

jobs:
  mandatory-coverage-enforcement:
    runs-on: ubuntu-latest
    steps:
      - name: ๐งช Run ALL tests with coverage
        run: pnpm run test:coverage

      - name: ๐ Enforce Mandatory Coverage Thresholds
        run: pnpm run enforce:coverage

      - name: โ Block Merge if Coverage Insufficient
        if: failure()
        run: |
          echo "::error::Coverage requirements not met - merge blocked"
          exit 1
```

## ๐ ุงููุถุน ุงูุญุงูู ูููุดุฑูุน

### ุญุงูุฉ ุงูุชุบุทูุฉ ุงูุญุงููุฉ (ูุจู ุงูุชุญุณูู)
| ุงูุญุฒูุฉ | Lines | Functions | Branches | Statements | ุงูุญุงูุฉ |
|--------|-------|-----------|----------|------------|--------|
| **@agent-team/ai** | 0% | 0% | 0% | 0% | โ ูุดู |
| **@agent-team/orchestration** | 39.67% | 52% | 63.63% | 39.67% | โ ูุดู |
| **@agent-team/communication** | 31.18% | 85.29% | 86.25% | 31.18% | โ ูุดู |
| **apps/server** | 57.03% | 48.71% | 70.12% | 57.03% | โ ูุดู |

### ุงููููุงุช ุงูุชู ุชุญุชุงุฌ ุงุฎุชุจุงุฑุงุช (35 ููู)
- โ `ai/src/exec/Invoke.ts`
- โ `orchestration/src/metrics/Metrics.ts`
- โ `ai/src/prompts/system.ts`
- โ `ai/src/tools/ToolRuntime.ts`
- ู 31 ููู ุฅุถุงูู...

## ๐จ ุงููุถุน ุงูุญุฑุฌ

**ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ!** โ

- โ ุงูุงุฎุชุจุงุฑุงุช ุชุนูู
- โ ุงูุชุบุทูุฉ ุชูุญุณุจ
- โ ุงูุญุฏูุฏ ุชููุฑุถ
- โ ุงููููุงุช ุบูุฑ ุงููุฎุชุจุฑุฉ ุชููุชุดู
- โ ุงูู commit ููุฑูุถ ุนูุฏ ุนุฏู ุงูุงูุชุซุงู

**ููู:** ุฌููุน ุงูููุงููุณ **ุชุญุช ุงูุญุฏูุฏ ุงูุฏููุง** - ูุฐุง ูุชุทูุจ **ุนูู ููุฑู**.

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูุฅูุฒุงููุฉ

### ูุจู ูู Commit
- [ ] **ุชู ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช:** `pnpm test` โ ูุฌุญ ุจุฏูู ุฃุฎุทุงุก
- [ ] **ุงูุชุบุทูุฉ ุงููุทููุจุฉ:** ุฌููุน ุงููููุงุช ุงููุชุบูุฑุฉ ูุฏููุง ุชุบุทูุฉ โฅ85%
- [ ] **ูุง ูููุงุช ุจุฏูู ุงุฎุชุจุงุฑุงุช:** `pnpm run enforce:all-files-tested` โ ูุฌุญ
- [ ] **ูุญุต ุงูุชุบุทูุฉ ุงูุตุงุฑู:** `pnpm run enforce:coverage` โ ูุฌุญ
- [ ] **Type Check:** `pnpm run typecheck` โ ุจุฏูู ุฃุฎุทุงุก
- [ ] **Lint:** `pnpm run lint` โ ุจุฏูู ุฃุฎุทุงุก

### ูุจู ูู Pull Request
- [ ] **CI/CD Pipeline:** ุฌููุน Checks ุฎุถุฑุงุก โ
- [ ] **Code Coverage Report:** ูุชููุฑ ููุฑุงุฌุน
- [ ] **Coverage Thresholds:** ุฌููุน ุงูุญุฏูุฏ ูุณุชููุงุฉ
- [ ] **No Untested Files:** ุตูุฑ ูููุงุช ุจุฏูู ุงุฎุชุจุงุฑุงุช

## ๐ฏ ุงูุฎุทุฉ ุงูุนุงุฌูุฉ ููุชุญุณูู

### ุงููุฑุญูุฉ 1: ุงูุฅุตูุงุญ ุงูููุฑู (ุฃุณุจูุน 1)
1. **ุฅูุดุงุก ุงุฎุชุจุงุฑุงุช ูููููุงุช ุงูุญุฑุฌุฉ** (ุงูู 10 ุงูุฃูุจุฑ ุญุฌูุงู)
2. **ุชุญุณูู ุชุบุทูุฉ ุงูุญุฒู ุงูุฃุณุงุณูุฉ** (ai, orchestration)
3. **ุงููุตูู ููุญุฏูุฏ ุงูุฏููุง** (โฅ85% ููุฌููุน)

### ุงููุฑุญูุฉ 2: ุงูุชุญุณูู ุงููุณุชูุฑ (ุฃุณุจูุน 2-4)
1. **ุงููุตูู ููุญุฏูุฏ ุงููุณุชูุฏูุฉ** (โฅ90% ููุฎุฏูุงุชุ โฅ95% ููุฐูุงุก ุงูุงุตุทูุงุนู)
2. **ุชุญุณูู ุฌูุฏุฉ ุงูุงุฎุชุจุงุฑุงุช** (edge cases, error handling)
3. **ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก**

### ุงููุฑุญูุฉ 3: ุงูุตูุงูุฉ (ูุณุชูุฑ)
1. **ูุฑุงูุจุฉ ุงูุชุบุทูุฉ ุฃุณุจูุนูุงู**
2. **ุชุญุฏูุซ ุงูุงุฎุชุจุงุฑุงุช ูุน ุงูุชุทููุฑ**
3. **ูุฑุงุฌุนุฉ ูุชุญุณูู ุงูุงุฎุชุจุงุฑุงุช ุงููุงุฆูุฉ**

## ๐ง ุงูุฃุฏูุงุช ุงููุชููุฑุฉ

### ุฃูุงูุฑ ููุฑูุฉ ูููุทูุฑูู
```bash
# ูุญุต ุณุฑูุน
pnpm run test:coverage          # ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ูุน ุงูุชุบุทูุฉ
pnpm run enforce:coverage       # ูุญุต ุงูุญุฏูุฏ ุงูุตุงุฑู
pnpm run enforce:all-files-tested # ูุดู ุงููููุงุช ุจุฏูู ุงุฎุชุจุงุฑุงุช

# ูุญุต ุดุงูู
pnpm run enforce:strict         # ุฌููุน ุงููุญูุตุงุช ุงูุตุงุฑูุฉ
pnpm run verify:all             # ุงูุชุญูู ุงููุงูู

# ุชุทููุฑ
pnpm run test:watch             # ูุถุน ุงููุฑุงูุจุฉ ููุงุฎุชุจุงุฑุงุช
pnpm run coverage:summary       # ููุฎุต ุงูุชุบุทูุฉ
```

## ๐ฏ ุงูุฎูุงุตุฉ: ุงูููุงุนุฏ ุงูุฐูุจูุฉ

1. **ูู ููู TypeScript = ููู ุงุฎุชุจุงุฑ ููุงุจู** (ุจุฏูู ุงุณุชุซูุงุกุงุช)
2. **ูู ุฏุงูุฉ/method = ุงุฎุชุจุงุฑุงุช ุดุงููุฉ** (Happy + Edge + Error)
3. **ูู branch ููุทูู = ุงุฎุชุจุงุฑ ูููุตู**
4. **ุงูุชุบุทูุฉ < 85% = ุฑูุถ ุชููุงุฆู**
5. **CI/CD ูุงุดู = ูุง merge ูููู**
6. **ูุง TODO ูู ุงูุงุฎุชุจุงุฑุงุช** ุจุฏูู ุชุชุจุน
7. **ูู Commit ููุฑ ุจูุญุต pre-commit ุงูุตุงุฑู**
8. **ูู PR ููุฑ ุจูุฑุงุฌุนุฉ CI/CD ุงูุดุงููุฉ**
9. **ูุง ุงุณุชุซูุงุกุงุช - ูุง ุฃุนุฐุงุฑ - ูุง ูุณุงููุงุช**
10. **ุงูุฌูุฏุฉ ุฃููุงู - ุฏุงุฆูุงู**

## โ๏ธ ุชุฐููุฑ ุฃุฎูุฑ

ูุฐุง ููุณ "ุฏููู ุชูุตูุงุช" - ูุฐุง **ุฃูุฑ ุฅูุฒุงูู** ูุถูุงู ุฌูุฏุฉ ุงูููุฏ ูุงูููุซูููุฉ.
**ูุง ูุณุงููุฉ. ูุง ุงุณุชุซูุงุกุงุช. ุงูุชุฒุงู ูุงูู.**

๐ฏ **ุงููุฏู:** ุตูุฑ ุนููุจ ูู Production - **ูุญู ุนูู ุงูุทุฑูู ุงูุตุญูุญ!**

---

## ๐ ุงูุชูุฏู ุงููุทููุจ

| ุงููุฑุญูุฉ | ุงูุชุงุฑูุฎ | ุงููุฏู | ุงูุญุงูู | ุงููุทููุจ |
|---------|---------|-------|--------|----------|
| **ุงูุฅุตูุงุญ ุงูููุฑู** | ุฃุณุจูุน 1 | โฅ85% ููุฌููุน | 0-57% | +28-85% |
| **ุงูุญุฏูุฏ ุงููุณุชูุฏูุฉ** | ุฃุณุจูุน 2-4 | โฅ90-100% | - | +5-43% |
| **ุงูุชููุฒ** | ูุณุชูุฑ | โฅ95% ููุญุฑุฌ | - | +5-38% |

**๐ ุงููุธุงู ุฌุงูุฒ - ุงูุขู ูุญุชุงุฌ ููุชูููุฐ ุงูุนุงุฌู!**
